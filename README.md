<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /README.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# CodingFlow Fluent Validation

[![Nuget](https://img.shields.io/nuget/v/CodingFlow.FluentValidation)](https://www.nuget.org/packages/CodingFlow.FluentValidation)
![GitHub Workflow Status (with event)](https://img.shields.io/github/actions/workflow/status/CodingFlow/fluent-validation/pull-request.yml)
[![Nuget](https://img.shields.io/nuget/dt/CodingFlow.FluentValidation)](https://www.nuget.org/packages/CodingFlow.FluentValidation)
[![GitHub Sponsors](https://img.shields.io/github/sponsors/CodingFlow)](https://github.com/sponsors/CodingFlow)

Minimal, easy to use fluent validations API inspired by [FluentValidation](https://github.com/FluentValidation/FluentValidation).

When you need to validate any type, even primitives in an easy and direct way, this library fits the bill. FluentValidation by Jeremy Skinner requires creating a separate validator class to register validation rules, and then instantiating the validator class. This library on the other hand, let's you add validation directly. This library is also ~ 25% faster performance-wise (See [performance benchmark](#performance-benchmark-comparison-with-fluentvalidation)).

# Usage

After installing the nuget package from Nuget.org, add this using statement to the file where you want to validate:

<!-- snippet: StandardUsing -->
<a id='snippet-StandardUsing'></a>
```cs
using static CodingFlow.FluentValidation.Validations;
```
<sup><a href='/Examples/BasicExample.cs#L2-L4' title='Snippet source file'>snippet source</a> | <a href='#snippet-StandardUsing' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Then you can add validation like this:

<!-- snippet: BasicExample -->
<a id='snippet-BasicExample'></a>
```cs
var input = 11;

var result = RuleFor(input)
    .BetweenInclusive(4, 6)
    .Result();

// Check results
bool isValid = result.IsValid;
var errors = result.Errors;
```
<sup><a href='/Examples/BasicExample.cs#L12-L22' title='Snippet source file'>snippet source</a> | <a href='#snippet-BasicExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

# Validators

There are several built-in validators available out-of-the-box. You can also provide your own validation logic via the [predicate validator](#predicate-validator) (aka `Must`).

## NotEmpty Validator

Ensures the value is not `null` for reference types or a default value for value types. For strings, ensures it is not `null`, an empty string, or only whitespace.

<!-- snippet: NotEmptyExample -->
<a id='snippet-NotEmptyExample'></a>
```cs
RuleFor(input)
    .NotEmpty()
    .Result();
```
<sup><a href='/Examples/NotEmptyExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-NotEmptyExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## BetweenInclusive Validator

Ensures a number of any type (`int`, `float`, `double`, etc.) is greater than or equal to a minimum and less than or equal to a maximum.

<!-- snippet: BetweenInclusiveExample -->
<a id='snippet-BetweenInclusiveExample'></a>
```cs
RuleFor(input)
    .BetweenInclusive(6, 14)
    .Result();
```
<sup><a href='/Examples/BetweenInclusiveExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-BetweenInclusiveExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## BetweenExclusive Validator

Ensures a number of any type (`int`, `float`, `double`, etc.) is greater than a minimum and less than a maximum.

<!-- snippet: BetweenExclusiveExample -->
<a id='snippet-BetweenExclusiveExample'></a>
```cs
RuleFor(input)
    .BetweenExclusive(6, 14)
    .Result();
```
<sup><a href='/Examples/BetweenExclusiveExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-BetweenExclusiveExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## Equal Validator

Ensures the input is considered equal to the provided value. For reference types it checks if the two references are to the same instance (reference equality). For value types, it checks it the types and values are the same (value equality).

<!-- snippet: EqualExample -->
<a id='snippet-EqualExample'></a>
```cs
RuleFor(input)
    .Equal(8)
    .Result();
```
<sup><a href='/Examples/EqualExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-EqualExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## MinimumLength Validator

Ensures the string has a minimum length.

<!-- snippet: MinimumLengthExample -->
<a id='snippet-MinimumLengthExample'></a>
```cs
RuleFor(input)
    .MinimumLength(5) // Must be at least 5 characters long.
    .Result();
```
<sup><a href='/Examples/MinimumLengthExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-MinimumLengthExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## MaximumLength Validator

Ensures the string has a maximum length.

<!-- snippet: MaximumLengthExample -->
<a id='snippet-MaximumLengthExample'></a>
```cs
RuleFor(input)
    .MaximumLength(5) // Must be at most 5 characters long.
    .Result();
```
<sup><a href='/Examples/MaximumLengthExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-MaximumLengthExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## Regular Expression Validator

Aka `Matches`, ensure the string passes a regular expression test.

<!-- snippet: MatchesExample -->
<a id='snippet-MatchesExample'></a>
```cs
RuleFor(input)
    .Matches("cat")
    .Result();
```
<sup><a href='/Examples/MatchesExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-MatchesExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## Predicate Validator

The predicate (aka `Must`) validator allows you to provide your own validation logic by providing a delegate.

<!-- snippet: MustExample -->
<a id='snippet-MustExample'></a>
```cs
RuleFor(input)
    .Must(input => input == 7)
    .Result();
```
<sup><a href='/Examples/MustExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-MustExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

## IsGuid Validator

Ensures the string can be parsed into a valid GUID.

<!-- snippet: IsGuidExample -->
<a id='snippet-IsGuidExample'></a>
```cs
RuleFor(input)
    .IsGuid()
    .Result();
```
<sup><a href='/Examples/IsGuidExample.cs#L12-L16' title='Snippet source file'>snippet source</a> | <a href='#snippet-IsGuidExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

# Customizing

## Custom Error Messages

The `WithMessage` method can be used to change the validation error message for a validator.

<!-- snippet: WithMessageExample -->
<a id='snippet-WithMessageExample'></a>
```cs
RuleFor(input)
    .Equal(8).WithMessage("The two numbers are not equal.")
.Result();
```
<sup><a href='/Examples/WithMessageExample.cs#L13-L17' title='Snippet source file'>snippet source</a> | <a href='#snippet-WithMessageExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

# Integrations

## Vogen

Extensions to integrate with [Vogen](https://github.com/SteveDunn/Vogen) validation methods.

To get started, install the [Vogen extensions](https://www.nuget.org/packages/CodingFlow.FluentValidation.VogenExtensions) nuget package, `CodingFlow.FluentValidation.VogenExtensions`.

To get the final result of the fluent validation chain, call `VogenResult()` instead of `Result()`:

<!-- snippet: VogenExample -->
<a id='snippet-VogenExample'></a>
```cs
[ValueObject]
public readonly partial struct Age
{
    public static Validation Validate(int value)
    {
        return RuleFor(value)
            .BetweenInclusive(0, 200)
            .VogenResult();
    }
}
```
<sup><a href='/Examples/VogenExamples/Age.cs#L8-L19' title='Snippet source file'>snippet source</a> | <a href='#snippet-VogenExample' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

# Performance Benchmark Comparison with FluentValidation

Benchmark of inclusive between validator shows this library is ~ 25% faster
than FluentValidation.

```
BenchmarkDotNet v0.15.8, Windows 11 (10.0.26200.7462/25H2/2025Update/HudsonValley2)
Intel Core Ultra 5 245KF 4.20GHz, 1 CPU, 14 logical and 14 physical cores
.NET SDK 10.0.101
  [Host]    : .NET 10.0.1 (10.0.1, 10.0.125.57005), X64 RyuJIT x86-64-v3
  .NET 10.0 : .NET 10.0.1 (10.0.1, 10.0.125.57005), X64 RyuJIT x86-64-v3
  .NET 8.0  : .NET 8.0.22 (8.0.22, 8.0.2225.52707), X64 RyuJIT x86-64-v3
  .NET 9.0  : .NET 9.0.11 (9.0.11, 9.0.1125.51716), X64 RyuJIT x86-64-v3
```

| Method           | Job       | Runtime   | Mean     | Error    | StdDev   | Gen0   | Gen1   | Allocated |
|----------------- |---------- |---------- |---------:|---------:|---------:|-------:|-------:|----------:|
| CodingFlow       | .NET 10.0 | .NET 10.0 | 34.58 ns | 0.154 ns | 0.144 ns | 0.0249 |      - |     312 B |
| FluentValidation | .NET 10.0 | .NET 10.0 | 46.73 ns | 0.527 ns | 0.493 ns | 0.0471 | 0.0001 |     592 B |
| CodingFlow       | .NET 8.0  | .NET 8.0  | 42.22 ns | 0.418 ns | 0.391 ns | 0.0249 |      - |     312 B |
| FluentValidation | .NET 8.0  | .NET 8.0  | 52.87 ns | 0.390 ns | 0.365 ns | 0.0471 | 0.0001 |     592 B |
| CodingFlow       | .NET 9.0  | .NET 9.0  | 35.42 ns | 0.211 ns | 0.187 ns | 0.0249 |      - |     312 B |
| FluentValidation | .NET 9.0  | .NET 9.0  | 48.73 ns | 0.175 ns | 0.164 ns | 0.0471 | 0.0001 |     592 B |

Benchmark code:

<!-- snippet: PerformanceBenchmarkBetweenInclusive -->
<a id='snippet-PerformanceBenchmarkBetweenInclusive'></a>
```cs
[MemoryDiagnoser]
[SimpleJob(RuntimeMoniker.Net10_0)]
[SimpleJob(RuntimeMoniker.Net90)]
[SimpleJob(RuntimeMoniker.Net80)]
public class BetweenBenchmark
{
    private readonly int input = 5;

    private readonly IntegerValidator validator = new();

    [Benchmark]
    public bool CodingFlow()
    {
        return RuleFor(input)
            .BetweenInclusive(1, 7)
            .Result()
            .IsValid;
    }

    [Benchmark]
    public bool FluentValidation()
    {
        return validator.Validate(input)
            .IsValid;
    }
}
```
<sup><a href='/PerformanceBenchmarks/BetweenBenchmark.cs#L8-L35' title='Snippet source file'>snippet source</a> | <a href='#snippet-PerformanceBenchmarkBetweenInclusive' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

FluentValidation validator:

<!-- snippet: IntegerValidator -->
<a id='snippet-IntegerValidator'></a>
```cs
internal class IntegerValidator : AbstractValidator<int>
{
    public IntegerValidator()
    {
        RuleFor(x => x).InclusiveBetween(1, 7);
    }
}
```
<sup><a href='/PerformanceBenchmarks/IntegerValidator.cs#L5-L13' title='Snippet source file'>snippet source</a> | <a href='#snippet-IntegerValidator' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->
